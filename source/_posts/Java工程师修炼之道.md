---
title: Java工程师修炼之道
date: 2023-04-04 20:20:40
tags: 读书笔记
categories: Java
---
# Java工程师修炼之道

[![pp5CdOK.md.png](https://s1.ax1x.com/2023/04/04/pp5CdOK.md.png)](https://imgse.com/i/pp5CdOK)

总结：适合用来建立知识框架，查漏补缺，介绍很多知识，都是点到为止，原理性的东西比较少。

## 1.后端技术的导言

### 要求

- 高可用、可容错、可扩展、可维护、稳定性、
  安全性

### 后端基础设施

- API网关：请求统一入口

  - 后端接口的功能

    - 负载均衡
    - API访问权限控制
    - 用户鉴权

  - 传统做法

    - 使用Nginx 做负载均衡，然后在每个业务应用里做API 接口的访问权限控制和用户鉴权，更优化一点的方式则是把后两者做成公共类库供所有业务调用

  - API网关做法

    - 集成到一起作为一个服务，这样既可以动态地修改权限控制和鉴权机制，也可以减少每个业务集成这些机制的成本，这种服务就是API 网关。

  - 缺点

    - 由于所有API 请求都要经过网关，它很容易成为系统的性能瓶颈。

  - 优化

    - 可以采取的方案是去掉API 网关，让业务应用直接对接统一认证中心，在基础框架层面保证每个API 调用都需要先通过统一认证中心的认证，这里可以采取缓存认证结果的方式避免对统一认证中心产生过大的请求压力。

- 业务应用和后端基础框架

  - 业务应用

    - 在线
    - 内部

  - 框架

    - MVC

      - springMVC
      - 阿里webX

    - IOC

      - spring

    - ORM

      - Mybatis
      - JdbcTemplate
      - Sharding—JDBC
      - Mycat

    - 缓存框架

      - redis

        - Spring的RedisTemplate
        - Jedis

      - Memcached

    - JavaEE应用性能检测框架

      - Jwebap

- 后端基础服务

  - 缓存

    - redis

  - 数据库

    - MySQL
    - Hbase

  - 搜索引擎

    - es
    - solr

  - 消息队列

    - kafka

      - 大数据

    - Rabbitmq

      - 重事务

- 文件存储

  - HDFS

- 统一认证中心

  - 用户的注册、登录验证、Token 鉴权。
    ·内部信息系统用户的管理和登录鉴权。
    • APP 的管理，包括APP 的secret 生成、APP 信息的验证（如验证接口签名）等

- 单点登录

  - 只需要一次用户登录，就能够进入多个业务应用（权限可以不相同），非常方便用户操作 
  - 比较成熟的、用得最多的单点登录系统应该是耶鲁大学开源的CAS

- 配置中心

  - 能够在线动态修改配置文件并生效。配置文件可以区分环境（开发、测试、生产等）。 在Java 中可以通过注解、XML 配置的方式引人相关配置。
  - 一般选择ZooKeeper 作为配置存储。

- 服务治理框架

  - 对于外部AP I 调用或者客户端对后端API 的访问，可以使用HTTP 协议或者阻RESTful（当然也可以直接通过最原始的Socket 来调用） 。
  - 对于内部服务间的调用， 一般都是通
    过RPC 机制来进行的

    - • RMI 。
    - • Hessian 。
    - • Thrift
    - • Dubbo 。
    - Hessian 是基于HTTP协议的， Dubbo 是基于TCP 协议的，而古lfi丘则同时支持两种协议。

  - 传统的ESB （企业服务总线）本质上就是一个服务治理方案
  - 阿里开源的D ubb o 则对以上方案做了很好的实现，也是目前很多公司都在使用的方案；

- 调度中心

  - 在很多业务中，定时调度是一个非常普遍的场景， 比如定时去抓取数据、定时刷新，订单的状态等
  - 统一调度中心则是对所有的调度任务进行管理，这样能够统一对调度集群进行调优、扩展、任务管理等。

    - · 根据Cron 表达式调度任务。
    - ． 动态修改、停止、删除任务。
    - ． 支持任务分片执行。
    - ． 支持任务工作流，比如一个任务完成之后再执行下一个任务。
    - ． 任务支持脚本、代码、U RL 等多种形式。
    - · 任务执行的日志记录、故障报警。

  - 现在很多方案都是使用ZooKeeper 来实现SpringQuartz 的分布式集群。
    此外，当当网开源的elastic-job 则在基础的分布式调度之上又加入了弹性资源利用等更
    强大的功能。

- 日志服务

  - 通过实现Log4j 或者LogBack 的appender 来实现统一日志框架，然后通过RPC 调用将日志打印到日志服务器上。

- 数据基础设施

  - 数据高速公路
  - 离线数据分析
  - 实时数据分析
  - 数据即席分析

- 故障监控

  - 系统监控

    - 主要指对主机的带宽、C PU 、内存、硬盘、I/O 等硬件资源的监控。

  - 业务监控

    - · 告警日志要记录发生故障的机器ID ，尤其是在集群服务中，如果没有记录机器ID ，那么对于后续的问题定位会很困难。
      · 要对告警做聚合，不要每一个故障都单独进行告警，这样会对工程师造成极大的困扰。
      · 要对告警做等级划分，不能对所有告警都做同样的优先级处理。
      · 使用微信作为告警软件，能够在节省短信成本的情况下，保证告警的到达率。
    - 如果是分布式服务，并且在日志数据量特别大的情况下，如何定位日志就成为了难题。

      - 建立ELK ( Elasticsearch + Logstash + Kibana ）日志集中分析平台，便于快速搜索、定位日志。
      - 建立分布式请求追踪系统（也可以叫全链路监测系统） 。对于分布式系统尤其是微服务架构，能够极方便地在海量调用中快速定位并收集单个异常请求信息， 也能快速定位一条请求链路的性能瓶颈。
      - 如果你的微服务实现使用了Spring Cloud ，那么Spring Cloud Sleuth 则是最佳的分布式追踪方案。

### Java后端技术概览

- 软件开发的核心原则

  - Don’t Repeat Yourself
  - Keep it simple stupid
  - You Ain’t Gonna Need It
  - Done is better than perfect
  - Choose the mos t suitable things

- 软开过程管理

  - 项目管理
  - 测试驱动开发
  - 持续集成

    - Jenkins 、Quick Build

- 开发工具

  - 编辑器
  - 源码版本管理
  - 项目工具

- 运行环境

  - Linux
  - 应用服务器

    - Tomcat 、Jetty 这两者只是Servlet 容器
    - Nginx 则是目前最流行的We b 服
      务器。

  - 负载均衡

    - 在高并发流量环境下，后端服务会以集群的模式对外提供服务。在集群的前面，需要负载均衡器将请求分配到集群的各个节点上。
    - LVS 是最流行的四层负载均衡软件， HAProxy是另一个既支持四层又支持七层负载均衡的软件， Nginx 则是七层负载均衡最流行的解决方案。
    - 为了保证同等角色的服务的高可用，如LVS 经常作为流量的入口，会部署多个LVS 节点互为主备，防止一个节点挂掉导致服务不可用。而实现互为主备的技术目前用得最多的就Keepalived。

  - 虚拟化

- 第三方服务

  - 邮件
  - 短信
  - 消息推送
  - 开放平台
  - 支付接口

- 计算机基础科学知识

  - 数据结构
  - 算法
  - 业务相关算法
  - 计算机网络
  - 设计模式

- 数据处理相关技能

  - 数据传输、数据存储、数据
    分析处理都成为关键环节

- Java编程知识
- 系统架构演进

  - D ubbo 算是微服务架构中用得比较多的框架，但Dubbo 仅仅解决了微服务架构中的一部分问题。另外， Spring Cloud 则基本上涵盖了微服务架构的各个方面。

- 部署架构

  - 对于Web 应用来说LVS+Nginx+Tomcat+MySQL+Redis 即可构成一个简单、通用的部署架构

    - • LVS 作为最前置的节点，负责在网络第四层转发流量、负载均衡。
    - ． 多个LVS 使用Keepalived 互为主备实现高可用。
    - • Nginx 作为反向代理，负责在网络第七层转发流量、负载均衡。
    - • Tomcat 作为业务容器，主要的应用代码都放在这里面。
    - • Redis 作为缓存， 隔离高并发请求和后端数据库。
    - • MySQL 以主从模式对数据做持久化。

### 怎样学习

- 扎实基础
- 只其所以然
- 动手实践
- 频繁练习
- 持续学习
- 自我总结
- 如何学习一门新技术

  - what

    - 官方文档定义
    - 对比同类技术的优缺点，适用场景
    - 技术的架构组成

  - why

    - 此技术解决什么问题
    - 自己会怎么解决这个问题

  - how

    - 官网QuickStart
    - 写demo
    - 看源码

      - 1 ）阅读该技术的架构文挡，了解其总体架构和组成。
      - 2 ）根据总体架构，将源码文件以模块或者上下层级进行分类。
      - 3 ）从未阅读过的模块中选择最独立（依赖性最小）的模块代码读起。
      - 4 ）阅读此模块的功能介绍文档。
      - 5 ）阅读此模块的源代码。
      - 6 ）. －边阅读一边整理调用关系（以表或者树的形式） 。
      - 7 ）转到第3 ）步。

    - 项目实践
    - 分享

## 2.Java项目与工程化

### 项目构建

- Ant
- Maven
- Gradle

### 版本控制

- SVN
- Git

### 代码质量保证

- JUnit
- Mock

  - EasyMock

## 3.开发框架

### IOC

### ROM

- 对象关系映射，是一种为了解决面向对象与关系
  型数据库不匹配而出现的技术，便开发者能够用面向对象的方式使用关系型数据库

  - · 一个规定Mapping Metadata 的工具，即数据库中的表、列与对象以及对象属性的映射。
    ． 一个对持久类对象进行CRUD 操作的API 。
    · 一个语言或API 用来规定与类和类属性相关的查询。
    · 一种技术可以让0灿f 的实现同事务对象一起进行缓存、延迟加载等操作。

- Mybatis

  - My Batis 的核心是SqlSessionFactory
  - $在这里的作用只是做字符串替换，不会修改或转义字符串。因此，能使用＃的地方就不要使用$，除非是像o rder by 这种不是参数的地方。
  - 缓存
  - 结果映射

- Hibernate

### Log

- • JDK Logging。
- • Apache Log4j。
- • Apache Log4j2 。
- • Logback。
- 日志接口框架

  - Commons Logging 、SLJ4J

- 目前比较推崇的是使用SLF4J 统一所有框架接口，然后都转换到Logback 的底层实
  现

### Web

- 互联网领域主要以Spring MVC 为主要的Web 开发框架

## 4.spring

### 核心组件

- IOC
- AOP
- SpringEL
- Spring双亲上下文机制
- 事件机制
- Bean的初始化与销毁
- Bean的动态构造

### 数据操作框架

- Spring ORM

  - Spring JDBC

    - 注入一个数据库连接池即可构造JdbcTemplate

  - Spring TX

    - 使用tx:annotation -driven 开启Spring 的注解事务，并配置transaction-manager
    - 使用＠Transactional 注解一个方法使其开启事务
    - 开启了事务的方法在数据库错误时应该抛出异常，否则无法做到事务回滚

- Spring Data Redis

  - 基于Jedis 之上对Redis 操作的封装

- Spring Data MOngoDB

  - 基于Mongo Java Driver 对Mon go DB 的操作封装

### Springboot

- 配置
- 运行原理
- 组成模块

### 常用组件

- Spring Expression Language

  - 表达式引擎
  - 引用bean

- Spring Remoting

  - 远程过程访问支持

- Spring与JMX集成
- Spring Quartz

  - 定时任务

- Spring CORS 

  - 跨域请求支持

- 其他

### Spring Could

- Config

  - 统一的配置中心

- Security

  - Oauth2客户端的负载均衡可以作为API网关的实现

- Consul

  - 服务的统一发现，注册，配置，类似于Dubbo

- Bus

  - 消息总线

- Sleuth

  - 链路追踪

- Netflix的各个组件

  - Zuul

    - API网关

  - Eureka

    - 注册中心

  - Hystrix

    - 服务的容错，降级，容错

## 5.数据存储

### 关系型数据库

- 关系型数据库是采用关系模型来组织数据的数据库，关系模型指的就是二维表格模型，而一个关系型数据库就是由二维表格及其之间的联系所组成的一个数据组
- MySql
- Oracle
- PostgreSQL

### 非关系数据库

- MongoDB
- CouchDB
- HBase

### 缓存系统

- Memcached
- Redis

### 搜索引擎

- Solr
- Elasticsearch

## 6.数据通信

### RESTful

- 表现层状态转移
- 资源，数据
- 数据表现形式
- 状态变化，HTTP method

  - GET

    - 获取

  - POST

    - 创建

  - PUT

    - 修改

  - DELETE

    - 删除

### RPC

- 内部服务之间调用
- dubbo
- RMI

### 消息中间件

- 解耦
- 异步
- 削峰

## 7.Java编程进阶

### 内存管理

### 网络编程

### 并发编程

### 子主题 4

## 8.性能调优

## 9.安全技术

*XMind: ZEN - Trial Version*