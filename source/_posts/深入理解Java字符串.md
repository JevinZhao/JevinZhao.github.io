---
title: æ·±å…¥ç†è§£Javaå­—ç¬¦ä¸²
date: 2021-05-07 08:21:36
tags: Javaè™šæ‹Ÿæœº
categories: Java
---
## æ·±å…¥ç†è§£å­—ç¬¦ä¸²å¸¸é‡æ± ğŸ¥‡

### Javaå†…å­˜åŒºåŸŸğŸ†

Stringæœ‰ä¸¤ç§èµ‹å€¼æ–¹å¼ï¼Œç¬¬ä¸€ç§æ˜¯é€šè¿‡â€œ**å­—é¢é‡**â€èµ‹å€¼ã€‚

```java
String str = "Hello";
```

 ç¬¬äºŒç§æ˜¯é€šè¿‡**new**å…³é”®å­—åˆ›å»ºæ–°å¯¹è±¡ã€‚

```java
String str = new String("Hello");
```

 è¦å¼„æ¸…æ¥šè¿™ä¸¤ç§æ–¹å¼çš„åŒºåˆ«ï¼Œé¦–å…ˆè¦çŸ¥é“ä»–ä»¬åœ¨å†…å­˜ä¸­çš„å­˜å‚¨ä½ç½®ã€‚

[![g3zlRK.png](https://z3.ax1x.com/2021/05/07/g3zlRK.png)](https://imgtu.com/i/g3zlRK)

æˆ‘ä»¬å¹³æ—¶æ‰€è¯´çš„å†…å­˜å°±æ˜¯å›¾ä¸­çš„**è¿è¡Œæ—¶æ•°æ®åŒºï¼ˆRuntime Data Areaï¼‰**ï¼Œå…¶ä¸­ä¸å­—ç¬¦ä¸²çš„åˆ›å»ºæœ‰å…³çš„æ˜¯**æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰**ã€**å †åŒºï¼ˆHeap Areaï¼‰**å’Œ**æ ˆåŒºï¼ˆStack Areaï¼‰**ã€‚

1. **æ–¹æ³•åŒº**ï¼šå­˜å‚¨ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€‚å…¨å±€å…±äº«ã€‚
2. **å †åŒº**ï¼šå­˜æ”¾å¯¹è±¡å’Œæ•°ç»„ã€‚å…¨å±€å…±äº«ã€‚
3. **æ ˆåŒº**ï¼šåŸºæœ¬æ•°æ®ç±»å‹ã€å¯¹è±¡çš„å¼•ç”¨éƒ½å­˜æ”¾åœ¨è¿™ã€‚çº¿ç¨‹ç§æœ‰ã€‚

[![g3ztZd.png](https://z3.ax1x.com/2021/05/07/g3ztZd.png)](https://imgtu.com/i/g3ztZd)

æ¯å½“ä¸€ä¸ªæ–¹æ³•è¢«æ‰§è¡Œæ—¶å°±ä¼šåœ¨æ ˆåŒºä¸­åˆ›å»ºä¸€ä¸ª**æ ˆå¸§ï¼ˆStack Frameï¼‰**ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹å’Œå¯¹è±¡å¼•ç”¨å°±å­˜åœ¨æ ˆå¸§ä¸­**å±€éƒ¨å˜é‡è¡¨ï¼ˆLocal Variablesï¼‰**ã€‚

å½“ä¸€ä¸ªç±»è¢«åŠ è½½ä¹‹åï¼Œç±»ä¿¡æ¯å°±å­˜å‚¨åœ¨éå †çš„æ–¹æ³•åŒºä¸­ã€‚åœ¨æ–¹æ³•åŒºä¸­ï¼Œæœ‰ä¸€å—å«åš**è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime Constant Poolï¼‰**,å®ƒæ˜¯æ¯ä¸ªç±»ç§æœ‰çš„ï¼Œæ¯ä¸ªclassæ–‡ä»¶ä¸­çš„â€œå¸¸é‡æ± â€è¢«åŠ è½½å™¨åŠ è½½ä¹‹åå°±æ˜ å°„å­˜æ”¾åœ¨è¿™ï¼Œåé¢ä¼šè¯´åˆ°è¿™ä¸€ç‚¹ã€‚

å’ŒStringæœ€ç›¸å…³çš„æ˜¯**å­—ç¬¦ä¸²æ± ï¼ˆString Poolï¼‰**ï¼Œå…¶ä½ç½®åœ¨æ–¹æ³•åŒºä¸Šé¢çš„**é©»ç•™å­—ç¬¦ä¸²ï¼ˆInterned Stringsï¼‰çš„ä½ç½®**ï¼Œä¹‹å‰ä¸€ç›´æŠŠå®ƒå’Œè¿è¡Œæ—¶å¸¸é‡æ± ææ··ï¼Œå…¶å®æ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„å­˜å‚¨åŒºåŸŸï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± æ˜¯å…¨å±€å…±äº«çš„ã€‚å­—ç¬¦ä¸²è°ƒç”¨String.intern()æ–¹æ³•åï¼Œå…¶å¼•ç”¨å°±å­˜æ”¾åœ¨String Poolä¸­ã€‚

### ä¸¤ç§åˆ›å»ºæ–¹å¼åœ¨å†…å­˜ä¸­çš„åŒºåˆ«ğŸ†

äº†è§£äº†è¿™äº›æ¦‚å¿µï¼Œä¸‹é¢æ¥è¯´è¯´ç©¶ç«Ÿä¸¤ç§å­—ç¬¦ä¸²åˆ›å»ºæ–¹å¼æœ‰ä½•åŒºåˆ«ã€‚

ä¸‹é¢çš„Testç±»ï¼Œåœ¨mainæ–¹æ³•é‡Œä»¥â€œå­—é¢é‡â€èµ‹å€¼çš„æ–¹å¼ç»™å­—ç¬¦ä¸²strèµ‹å€¼ä¸ºâ€œHelloâ€ã€‚

```java
public class Test {
    public static void main(String[] args) {
        
        String str = "Hello";
        
    } 
}
```

Test.javaæ–‡ä»¶ç¼–è¯‘åå¾—åˆ°.classæ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«äº†ç±»çš„ä¿¡æ¯ï¼Œå…¶ä¸­æœ‰ä¸€å—å«åš**å¸¸é‡æ± ï¼ˆConstant Poolï¼‰**çš„åŒºåŸŸï¼Œ.classå¸¸é‡æ± å’Œå†…å­˜ä¸­çš„å¸¸é‡æ± å¹¶ä¸æ˜¯ä¸€ä¸ªä¸œè¥¿ã€‚

.classæ–‡ä»¶å¸¸é‡æ± ä¸»è¦å­˜å‚¨çš„å°±åŒ…æ‹¬**å­—é¢é‡**ï¼Œå­—é¢é‡åŒ…æ‹¬ç±»ä¸­å®šä¹‰çš„å¸¸é‡ï¼Œç”±äºStringæ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥å­—ç¬¦ä¸²â€œHelloâ€å°±å­˜æ”¾åœ¨è¿™ã€‚

[![g3z0Rf.png](https://z3.ax1x.com/2021/05/07/g3z0Rf.png)](https://imgtu.com/i/g3z0Rf)

å½“ç¨‹åºç”¨åˆ°Testç±»æ—¶ï¼ŒTest.classè¢«è§£æåˆ°å†…å­˜ä¸­çš„æ–¹æ³•åŒºã€‚.classæ–‡ä»¶ä¸­çš„å¸¸é‡æ± ä¿¡æ¯ä¼šè¢«åŠ è½½åˆ°**è¿è¡Œæ—¶å¸¸é‡æ± **ï¼Œä½†Stringä¸æ˜¯ã€‚

ä¾‹å­ä¸­â€œHelloâ€ä¼šåœ¨å †åŒºä¸­åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼ŒåŒæ—¶ä¼šåœ¨**å­—ç¬¦ä¸²æ± ï¼ˆString Poolï¼‰**å­˜æ”¾ä¸€ä¸ª**å®ƒçš„å¼•ç”¨**ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

[![g3zrQS.png](https://z3.ax1x.com/2021/05/07/g3zrQS.png)](https://imgtu.com/i/g3zrQS)

**æ­¤æ—¶åªæ˜¯Testç±»åˆšåˆšè¢«åŠ è½½ï¼Œä¸»å‡½æ•°ä¸­çš„strå¹¶æ²¡æœ‰è¢«åˆ›å»ºï¼Œè€Œâ€œHelloâ€å¯¹è±¡å·²ç»åˆ›å»ºåœ¨äºå †ä¸­ã€‚**

å½“ä¸»çº¿ç¨‹å¼€å§‹åˆ›å»ºstrå˜é‡æ—¶ï¼Œè™šæ‹Ÿæœºä¼šå»å­—ç¬¦ä¸²æ± ä¸­æ‰¾æ˜¯å¦æœ‰equals(â€œHelloâ€)çš„Stringï¼Œå¦‚æœç›¸ç­‰å°±æŠŠåœ¨å­—ç¬¦ä¸²æ± ä¸­â€œHelloâ€çš„**å¼•ç”¨å¤åˆ¶ç»™str**ã€‚å¦‚æœæ‰¾ä¸åˆ°ç›¸ç­‰çš„å­—ç¬¦ä¸²ï¼Œå°±ä¼šåœ¨å †ä¸­æ–°å»ºä¸€ä¸ªå¯¹è±¡ï¼ŒåŒæ—¶æŠŠå¼•ç”¨é©»ç•™åœ¨å­—ç¬¦ä¸²æ± ï¼Œå†æŠŠå¼•ç”¨èµ‹ç»™strã€‚

[![g3zyLQ.png](https://z3.ax1x.com/2021/05/07/g3zyLQ.png)](https://imgtu.com/i/g3zyLQ)

å½“ç”¨å­—é¢é‡èµ‹å€¼çš„æ–¹æ³•åˆ›å»ºå­—ç¬¦ä¸²æ—¶ï¼Œæ— è®ºåˆ›å»ºå¤šå°‘æ¬¡ï¼Œåªè¦å­—ç¬¦ä¸²çš„å€¼ç›¸åŒï¼Œå®ƒä»¬æ‰€æŒ‡å‘çš„éƒ½æ˜¯å †ä¸­çš„åŒä¸€ä¸ªå¯¹è±¡ã€‚

```java
public class Test {
    public static void main(String[] args) {
        
        String str1 = "Hello";
        String str2 = â€œHelloâ€;
        String str3 = â€œHelloâ€;
        
    } 
}
```

[![g3zcZj.png](https://z3.ax1x.com/2021/05/07/g3zcZj.png)](https://imgtu.com/i/g3zcZj)

å½“åˆ©ç”¨**new**å…³é”®å­—å»åˆ›å»ºå­—ç¬¦ä¸²æ—¶ï¼Œå‰é¢åŠ è½½çš„è¿‡ç¨‹æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯åœ¨è¿è¡Œæ—¶æ— è®ºå­—ç¬¦ä¸²æ± ä¸­æœ‰æ²¡æœ‰ä¸å½“å‰å€¼ç›¸ç­‰çš„å¯¹è±¡å¼•ç”¨ï¼Œéƒ½ä¼šåœ¨å †ä¸­æ–°å¼€è¾Ÿä¸€å—å†…å­˜ï¼Œåˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚

```java
public class Test {
    public static void main(String[] args) {
        
        String str1 = "Hello";
        String str2 = â€œHelloâ€;
        String str3 = new String("Hello");
        
    } 
}
```

[![g3z2on.png](https://z3.ax1x.com/2021/05/07/g3z2on.png)](https://imgtu.com/i/g3z2on)

### è§£é‡Šä¸åŒçš„ä¾‹å­ğŸ†

```java
String s1 = "Hello";
String s2 = "Hello";
String s3 = "Hel" + "lo";
String s4 = "Hel" + new String("lo");
String s5 = new String("Hello");
String s6 = s5.intern();
String s7 = "H";
String s8 = "ello";
String s9 = s7 + s8;
          
System.out.println(s1 == s2);  // true
System.out.println(s1 == s3);  // true
System.out.println(s1 == s4);  // false
System.out.println(s1 == s9);  // false
System.out.println(s4 == s5);  // false
System.out.println(s1 == s6);  // true
```

**s1**åœ¨åˆ›å»ºå¯¹è±¡çš„åŒæ—¶ï¼Œåœ¨å­—ç¬¦ä¸²æ± ä¸­ä¹Ÿåˆ›å»ºäº†å…¶å¯¹è±¡çš„å¼•ç”¨ã€‚

ç”±äº**s2**ä¹Ÿæ˜¯åˆ©ç”¨å­—é¢é‡åˆ›å»ºï¼Œæ‰€ä»¥ä¼šå…ˆå»å­—ç¬¦ä¸²æ± ä¸­å¯»æ‰¾æ˜¯å¦æœ‰ç›¸ç­‰çš„å­—ç¬¦ä¸²ï¼Œæ˜¾ç„¶**s1**å·²ç»å¸®ä»–åˆ›å»ºå¥½äº†ï¼Œå®ƒå¯ä»¥ç›´æ¥ä½¿ç”¨å…¶å¼•ç”¨ã€‚é‚£ä¹ˆs1å’Œs2æ‰€æŒ‡å‘çš„éƒ½æ˜¯åŒä¸€ä¸ªåœ°å€ï¼Œæ‰€ä»¥**s1==s2**ã€‚

**s3**æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ‹¼æ¥æ“ä½œï¼Œå‚ä¸æ‹¼æ¥çš„éƒ¨åˆ†éƒ½æ˜¯å­—é¢é‡ï¼Œç¼–è¯‘å™¨ä¼šè¿›è¡Œä¼˜åŒ–ï¼Œåœ¨ç¼–è¯‘æ—¶s3å°±å˜æˆâ€œHelloâ€äº†ï¼Œæ‰€ä»¥**s1==s3**ã€‚

**s4**è™½ç„¶ä¹Ÿæ˜¯æ‹¼æ¥ï¼Œä½†â€œloâ€æ˜¯é€šè¿‡**new**å…³é”®å­—åˆ›å»ºçš„ï¼Œåœ¨ç¼–è¯‘æœŸæ— æ³•çŸ¥é“å®ƒçš„åœ°å€ï¼Œæ‰€ä»¥ä¸èƒ½åƒs3ä¸€æ ·ä¼˜åŒ–ã€‚æ‰€ä»¥å¿…é¡»è¦ç­‰åˆ°è¿è¡Œæ—¶æ‰èƒ½ç¡®å®šï¼Œå¿…ç„¶æ–°å¯¹è±¡çš„åœ°å€å’Œå‰é¢çš„ä¸åŒã€‚

åŒç†ï¼Œ**s9**ç”±**ä¸¤ä¸ªå˜é‡æ‹¼æ¥**ï¼Œ**ç¼–è¯‘æœŸä¹Ÿä¸çŸ¥é“ä»–ä»¬çš„å…·ä½“ä½ç½®**ï¼Œä¸ä¼šåšå‡ºä¼˜åŒ–ã€‚

**s5**æ˜¯newå‡ºæ¥çš„ï¼Œåœ¨å †ä¸­çš„åœ°å€è‚¯å®šå’Œs4ä¸åŒã€‚

**s6**åˆ©ç”¨intern()æ–¹æ³•å¾—åˆ°äº†s5åœ¨**å­—ç¬¦ä¸²æ± çš„å¼•ç”¨**ï¼Œå¹¶ä¸æ˜¯s5æœ¬èº«çš„åœ°å€ã€‚ç”±äºå®ƒä»¬åœ¨å­—ç¬¦ä¸²æ± çš„å¼•ç”¨éƒ½æŒ‡å‘åŒä¸€ä¸ªâ€œHelloâ€å¯¹è±¡ï¼Œè‡ªç„¶**s1==s6**ã€‚

 æ€»ç»“ä¸€ä¸‹ï¼š

- **å­—é¢é‡åˆ›å»ºå­—ç¬¦ä¸²ä¼šå…ˆåœ¨å­—ç¬¦ä¸²æ± ä¸­æ‰¾ï¼Œçœ‹æ˜¯å¦æœ‰ç›¸ç­‰çš„å¯¹è±¡ï¼Œæ²¡æœ‰çš„è¯å°±åœ¨å †ä¸­åˆ›å»ºï¼ŒæŠŠåœ°å€é©»ç•™åœ¨å­—ç¬¦ä¸²æ± ï¼›æœ‰çš„è¯åˆ™ç›´æ¥ç”¨æ± ä¸­çš„å¼•ç”¨ï¼Œé¿å…é‡å¤åˆ›å»ºå¯¹è±¡ã€‚**
- **newå…³é”®å­—åˆ›å»ºæ—¶ï¼Œå‰é¢çš„æ“ä½œå’Œå­—é¢é‡åˆ›å»ºä¸€æ ·ï¼Œåªä¸è¿‡æœ€ååœ¨è¿è¡Œæ—¶ä¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå˜é‡æ‰€å¼•ç”¨çš„éƒ½æ˜¯è¿™ä¸ªæ–°å¯¹è±¡çš„åœ°å€ã€‚**

 ç”±äºä¸åŒç‰ˆæœ¬çš„JDKå†…å­˜ä¼šæœ‰äº›å˜åŒ–ï¼ŒJDK1.6å­—ç¬¦ä¸²å¸¸é‡æ± åœ¨æ°¸ä¹…ä»£ï¼Œ1.7ç§»åˆ°äº†å †ä¸­ï¼Œ1.8ç”¨å…ƒç©ºé—´ä»£æ›¿äº†æ°¸ä¹…ä»£ã€‚ä½†æ˜¯åŸºæœ¬å¯¹ä¸Šé¢çš„ç»“è®ºæ²¡æœ‰å½±å“ï¼Œæ€æƒ³æ˜¯ä¸€æ ·çš„ã€‚

### intern()æ–¹æ³•ğŸ†

```java
/**
     * Returns a canonical representation for the string object.
     * <p>
     * A pool of strings, initially empty, is maintained privately by the
     * class {@code String}.
     * <p>
     * When the intern method is invoked, if the pool already contains a
     * string equal to this {@code String} object as determined by
     * the {@link #equals(Object)} method, then the string from the pool is
     * returned. Otherwise, this {@code String} object is added to the
     * pool and a reference to this {@code String} object is returned.
     * <p>
     * It follows that for any two strings {@code s} and {@code t},
     * {@code s.intern() == t.intern()} is {@code true}
     * if and only if {@code s.equals(t)} is {@code true}.
     * <p>
     * All literal strings and string-valued constant expressions are
     * interned. String literals are defined in section 3.10.5 of the
     * <cite>The Javaâ„¢ Language Specification</cite>.
     *
     * @return  a string that has the same contents as this string, but is
     *          guaranteed to be from a pool of unique strings.
     */
    public native String intern();
```

è¿™ä¸ªæ–¹æ³•æ˜¯ä¸€ä¸ªæœ¬åœ°æ–¹æ³•ï¼Œæ³¨é‡Šä¸­æè¿°å¾—å¾ˆæ¸…æ¥šï¼šâ€œå¦‚æœå¸¸é‡æ± ä¸­å­˜åœ¨å½“å‰å­—ç¬¦ä¸²ï¼Œå°±ä¼šç›´æ¥è¿”å›å½“å‰å­—ç¬¦ä¸²ï¼›å¦‚æœå¸¸é‡æ± ä¸­æ²¡æœ‰æ­¤å­—ç¬¦ä¸²ï¼Œä¼šå°†æ­¤å­—ç¬¦ä¸²æ”¾å…¥å¸¸é‡æ± ä¸­åï¼Œå†è¿”å›â€ã€‚

ç”±äºä¸Šé¢æåˆ°JDK1.6ä¹‹åï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± åœ¨å†…å­˜ä¸­çš„ä½ç½®å‘ç”Ÿäº†å˜åŒ–ï¼Œæ‰€ä»¥intern()æ–¹æ³•åœ¨ä¸åŒç‰ˆæœ¬çš„JDKä¸­ä¹Ÿæœ‰æ‰€å·®åˆ«ã€‚

æ¥çœ‹ä¸‹é¢çš„ä»£ç 

```java
public static void main(String[] args) {
    String s = new String("1");
    s.intern();
    String s2 = "1";
    System.out.println(s == s2);

    String s3 = new String("1") + new String("1");
    s3.intern();
    String s4 = "11";
    System.out.println(s3 == s4);
}
```

åœ¨JDK1.6ä¸­çš„è¿è¡Œç»“æœæ˜¯**false false**ï¼Œè€Œåœ¨1.7ä¸­ç»“æœæ˜¯**false true**ã€‚

å°†intern()è¯­å¥ä¸‹ç§»ä¸€è¡Œã€‚

```java
public static void main(String[] args) {
    String s = new String("1");
    String s2 = "1";
    s.intern();
    System.out.println(s == s2);

    String s3 = new String("1") + new String("1");
    String s4 = "11";
    s3.intern();
    System.out.println(s3 == s4);
}
```

åœ¨JDK1.6ä¸­çš„è¿è¡Œç»“æœæ˜¯**false false**ï¼Œåœ¨1.7ä¸­ç»“æœä¹Ÿæ˜¯**false false**ã€‚

[![g3zhWV.jpg](https://z3.ax1x.com/2021/05/07/g3zhWV.jpg)](https://imgtu.com/i/g3zhWV)

å›¾ä¸­ç»¿è‰²çº¿æ¡ä»£è¡¨stringå¯¹è±¡çš„å†…å®¹æŒ‡å‘ï¼Œé»‘è‰²çº¿æ¡ä»£è¡¨åœ°å€æŒ‡å‘ã€‚

JDK1.6ä¸­çš„intern()æ–¹æ³•åªæ˜¯è¿”å›å¸¸é‡æ± ä¸­çš„å¼•ç”¨ï¼Œä¸Šé¢è¯´è¿‡ï¼Œå¸¸é‡æ± ä¸­çš„å¼•ç”¨æ‰€æŒ‡å‘çš„å¯¹è±¡å’Œnewå‡ºæ¥çš„å¯¹è±¡å¹¶ä¸æ˜¯ä¸€ä¸ªï¼Œæ‰€ä»¥ä»–ä»¬çš„åœ°å€è‡ªç„¶ä¸ç›¸åŒã€‚

æ¥ç€æ¥è¯´ä¸€ä¸‹**JDK1.7**ï¼š

[![g3z4zT.jpg](https://z3.ax1x.com/2021/05/07/g3z4zT.jpg)](https://imgtu.com/i/g3z4zT)

å†è´´ä¸€ä¸‹ä»£ç 

```java
public static void main(String[] args) {
    String s = new String("1");
    s.intern();
    String s2 = "1";
    System.out.println(s == s2);

    String s3 = new String("1") + new String("1");
    s3.intern();
    String s4 = "11";
    System.out.println(s3 == s4);
}
```

åˆ›å»ºs3ç”Ÿæˆäº†ä¸¤ä¸ªæœ€ç»ˆå¯¹è±¡ï¼ˆ**ä¸è€ƒè™‘ä¸¤ä¸ªnew String("1")ï¼Œå¸¸é‡æ± ä¸­ä¹Ÿæ²¡æœ‰â€œ11â€**ï¼‰ï¼Œä¸€ä¸ªæ˜¯**s3**ï¼Œå¦ä¸€ä¸ªæ˜¯æ± ä¸­çš„**â€œ1â€**ã€‚å¦‚æœåœ¨1.6ä¸­ï¼Œs3è°ƒç”¨intern()æ–¹æ³•ï¼Œåˆ™å…ˆåœ¨å¸¸é‡æ± ä¸­å¯»æ‰¾æ˜¯å¦æœ‰ç­‰äºâ€œ11â€çš„å¯¹è±¡ï¼Œæœ¬ä¾‹ä¸­è‡ªç„¶æ˜¯æ²¡æœ‰ï¼Œç„¶åä¼šåœ¨å †ä¸­åˆ›å»ºä¸€ä¸ªâ€œ11â€çš„å¯¹è±¡ï¼Œå¹¶åœ¨å¸¸é‡æ± ä¸­å­˜å‚¨å®ƒçš„å¼•ç”¨å¹¶è¿”å›ã€‚ç„¶è€Œåœ¨1.7ä¸­è°ƒç”¨intern()ï¼Œå¦‚æœè¿™ä¸ªå­—ç¬¦ä¸²åœ¨å¸¸é‡æ± ä¸­æ˜¯**ç¬¬ä¸€æ¬¡å‡ºç°**ï¼Œåˆ™ä¸ä¼šé‡æ–°åˆ›å»ºå¯¹è±¡ï¼Œç›´æ¥è¿”å›å®ƒåœ¨å †ä¸­çš„å¼•ç”¨ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œs4å’Œs3æŒ‡å‘çš„éƒ½æ˜¯åœ¨å †ä¸­çš„é‚£ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥s3å’Œs4çš„åœ°å€ç›¸ç­‰ã€‚

ç”±äº**s**æ˜¯newå‡ºæ¥çš„ï¼Œæ‰€ä»¥ä¼šåœ¨å¸¸é‡æ± å’Œå †ä¸­åˆ›å»ºä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ï¼Œs.intern()åï¼Œå‘ç°â€œ1â€å¹¶ä¸æ˜¯ç¬¬ä¸€æ¬¡å‡ºç°åœ¨å¸¸é‡æ± äº†ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥å°±å’Œä¹‹å‰æ²¡æœ‰åŒºåˆ«äº†ã€‚

[![g3zoyF.jpg](https://z3.ax1x.com/2021/05/07/g3zoyF.jpg)](https://imgtu.com/i/g3zoyF)

```java
public static void main(String[] args) {
    String s = new String("1");
    String s2 = "1";
    s.intern();
    System.out.println(s == s2);

    String s3 = new String("1") + new String("1");
    String s4 = "11";
    s3.intern();
    System.out.println(s3 == s4);
}
```

å°†intern()è¯­å¥ä¸‹ç§»ä¸€è¡Œåï¼Œæ‰§è¡Œé¡ºåºå‘ç”Ÿæ”¹å˜ï¼Œæ‰§è¡Œåˆ°intern()æ—¶ï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± å·²ç»å­˜åœ¨â€œ1â€å’Œâ€œ11â€äº†ï¼Œå¹¶ä¸æ˜¯ç¬¬ä¸€æ¬¡å‡ºç°ï¼Œå­—é¢é‡å¯¹è±¡ä¾ç„¶æŒ‡å‘çš„æ˜¯å¸¸é‡æ± ï¼Œæ‰€ä»¥å­—é¢é‡åˆ›å»ºçš„å¯¹è±¡å’Œnewçš„å¯¹è±¡åœ°å€ä¸€å®šæ˜¯ä¸åŒçš„ã€‚

### ReferenceğŸ†

[javaç”¨è¿™æ ·çš„æ–¹å¼ç”Ÿæˆå­—ç¬¦ä¸²ï¼šString str = "Hello"ï¼Œåˆ°åº•æœ‰æ²¡æœ‰åœ¨å †ä¸­åˆ›å»ºå¯¹è±¡ï¼Ÿ](https://www.zhihu.com/question/29884421/answer/113785601)

[è§¦æ‘¸javaå¸¸é‡æ± ](https://www.cnblogs.com/iyangyuan/p/4631696.html)

[æ·±å…¥è§£æString#intern](https://tech.meituan.com/2014/03/06/in-depth-understanding-string-intern.html)

[Strings, Literally](https://javaranch.com/journal/200409/ScjpTipLine-StringsLiterally.html)

[ç†è§£Javaå­—ç¬¦ä¸²å¸¸é‡æ± ä¸intern()æ–¹æ³•](https://www.cnblogs.com/justcooooode/p/7603381.html)